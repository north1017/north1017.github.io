<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>円：circles</title>

<!-- 1. ここにP5.jsを読み込む -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>

<!-- 2.以下にsetup関数とdraw関数を定義 -->
<script>

let room = "s1317119";
let socket = io.connect('https://qa.fujimura.com');
let myid;

let x = 0;
let y = 0;
let color1 = 0;
let color2 = 0;
let color3 = 0;
let alpha = 0;
let gamma = 0;
let beta = 0;
let r = 40;
    
socket.on('mylogin', function(data) {
  document.querySelector("#room").innerHTML = room;
  myid = data;
  socket.emit('join', room); // 受信room IDを指定
  document.querySelector("#myid").innerHTML = myid;
  console.log("あなたのID: ", myid);
});

socket.on('sensor', function(data) {
  alpha = parseInt(data.a);
  beta  = parseInt(data.b);
  gamma = parseInt(data.g);
  color1 = alpha/ 1000;
  color2 = beta * 10;
  color3 = gamma*-10;
  console.log(data);
});

function setup() {
  createCanvas(800, 800, WEBGL);
  colorMode(HSB);
  stroke(0);
}

function draw() {
//カメラを定義、スマホの傾きで変化する
//参考サイト：https://yoppa.org/proga10/1301.html
//camera(視点X, 視点Y, 視点Z, 中心点X, 中心点Y, 中心点Z, 天地X, 天地Y, 天地Z);
camera(-PI*gamma*10, -PI*beta*10, 1200, 275, 275, 0, 0, 1, 0);
background(0);
ambientLight(125, 125, 125);
directionalLight(60, 60, 80, 1, 1, 1);
pointLight(80, 60, 60, 0, 0, 800);
orbitControl();


//参考サイト：http://htsuda.net/archives/1291
//1
push();
translate(0,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(100,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(200,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(300,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(400,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(500,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(600,0,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

//2
push();
translate(0,100,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(100,100,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(200,100,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(300,100,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(400,100,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(500,100,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(600,100,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

//3
push();
translate(0,200,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(100,200,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(200,200,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(300,200,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(400,200,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(500,200,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(600,200,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

//4
push();
translate(0,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(100,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(200,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(300,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(400,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(500,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(600,300,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

//5
push();
translate(0,400,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(100,400,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(200,400,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(300,400,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(400,400,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(500,400,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(600,400,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

//6
push();
translate(0,500,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(100,500,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(200,500,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(300,500,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(400,500,0);
//specularMaterial(200);
fill(color2,100,100);
box(100,100,100);
pop();

push();
translate(500,500,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(600,500,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

//7
push();
translate(0,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(100,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(200,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(300,600,0);
//specularMaterial(200);
fill(color3,100,100);
box(100,100,100);
pop();

push();
translate(400,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(500,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();

push();
translate(600,600,0);
//specularMaterial(200);
fill(color3,100,color3);
box(100,100,100);
pop();
}


</script>
</head>
<body>
  <div>ID: <span id="myid"></span></div>
  <div>room: <span id="room"></span></div>
</body>
</html>
